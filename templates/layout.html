<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Главная{% endblock %}</title>
    <link href="{{ url_for('static', filename='bootstrap/css/bootstrap.min.css') }}" rel="stylesheet">
    <link href="{{ url_for('static', filename='css/custom.css') }}" rel="stylesheet">
    <style>
        html, body {
            height: 100%;
        }
        body {
            display: flex;
            flex-direction: column;
        }
        main {
            flex: 1;
        }
    </style>
</head>
<body>

    <!-- Верхняя панель -->
    <header class="bg-success text-white py-2">
        <div class="container-fluid d-flex justify-content-between align-items-center px-3">
            <p class="mb-0">Добро пожаловать в наш магазин! Быстрая доставка и лучшие товары.</p>
            <div>
                {% if session.get('user') %}
                    <a href="{{ url_for('admin_panel') }}" class="btn btn-warning">Админ панель</a>
                    <a href="{{ url_for('logout') }}" class="btn btn-danger ms-2">Выйти</a>
                {% else %}
                    <a href="{{ url_for('login') }}" class="btn btn-primary">Войти</a>
                    <a href="{{ url_for('register') }}" class="btn btn-primary ms-2">Зарегистрироваться</a>
                {% endif %}
            </div>
        </div>
    </header>

    <!-- Основной контент -->
    <main class="container-xxl my-3">
        <div class="row">
            <!-- Меню -->
            <aside class="col-12 col-md-4 col-xxl-3 bg-light p-4">
                <h3>Меню</h3>
                <ul class="nav flex-column">
                    <li class="nav-item"><a class="nav-link {% if request.path == '/' %}active{% endif %}" href="{{ url_for('index') }}">Главная</a></li>
                    <li class="nav-item">
                        <a class="nav-link" href="#" data-bs-toggle="collapse" data-bs-target="#categoriesMenu">Категории товаров</a>
                        <ul class="collapse" id="categoriesMenu">
                            <li><a class="nav-link" href="{{ url_for('ovoshi') }}">Овощи</a></li>
                            <li><a class="nav-link" href="{{ url_for('myaso') }}">Мясо</a></li>
                            <li><a class="nav-link" href="{{ url_for('frukti') }}">Фрукты</a></li>
                            <li><a class="nav-link" href="{{ url_for('milk_prod') }}">Молочная продукция</a></li>
                        </ul>
                    </li>
                    <li class="nav-item"><a class="nav-link" href="{{ url_for('contacts') }}">Контакты</a></li>

                    {% if user_role == 'admin' %}
                        <li class="nav-item"><a class="nav-link {% if request.path == '/admin' %}active{% endif %}" href="{{ url_for('admin_panel') }}">Админ панель</a></li>
                        <li class="nav-item"><a class="nav-link {% if request.path == '/manage_categories' %}active{% endif %}" href="{{ url_for('manage_categories') }}">Управление категориями</a></li>
                        <li class="nav-item"><a class="nav-link {% if request.path == '/manage_products' %}active{% endif %}" href="{{ url_for('manage_products') }}">Управление товарами</a></li>
                    {% endif %}
                </ul>
            </aside>

            <!-- Контент -->
            <section class="col-12 col-md-8 col-xxl-9 p-4">
                {% block content %}
                {% endblock %}
            </section>
        </div>
    </main>

    <!-- Подвал -->
    <footer class="bg-dark text-white py-3 mt-4">
        <div class="container-fluid text-center">
            <p class="mb-0">&copy; 2025 Наш магазин</p>
        </div>
    </footer>

    <script src="{{ url_for('static', filename='bootstrap/js/bootstrap.bundle.min.js') }}"></script>
</body>
</html>
